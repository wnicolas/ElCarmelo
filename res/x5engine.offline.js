(function(a,b){"use strict",a.extend(b,{imBlog:{separator:'<div class="imBlogSeparator"></div>\n',paginate:function(a,c,d,e){var f='<div style="text-align: center;">',g=b.l10n.get;return c>0&&(f+='<a href="'+a+"start="+(c-d)+"&length="+d+'">'+g("blog_pagination_prev","&lt;&lt; Newer posts")+"</a>"),c>0&&e>c+d&&(f+=" | "),e>c+d&&(f+='<a href="'+a+"start="+(c+d)+"&length="+d+'">'+g("blog_pagination_next","Older posts &gt;&gt;")+"</a>"),f+="</div>",f},showPost:function(a,c,d){c=c||0,d=d||0;var e="",f=b.l10n.get,g=b.settings.imBlog,h=g.posts[a],i="";if(h===null||h===undefined)return;i=c?h.title:'<a href="?id='+a+'">'+h.title+"</a>",e+='<h2 id="imPgTitle" style="display: block;">'+i+"</h2>",e+='<div class="imBreadcrumb" style="display: block;">'+f("blog_published_by")+"<strong> "+h.author+" </strong>",e+=f("blog_in")+' <a href="?category='+h.category.replace(/[\s]{1}/g,"_")+'">'+h.category+"</a> &#149; "+h.timestamp,h.media!==null&&h.media!==undefined&&(e+=' &#149; <a href="'+h.media+'">Download '+h.media.substring(h.media.lastIndexOf("/"))+"</a>");if(h.tag.length>0){e+="<br />Tags: ";for(var j=0;j<h.tag.length;j++)e+='<a href="?tag='+h.tag[j]+'">'+h.tag[j]+"</a>,&nbsp;"}e+="</div>";if(c||d&&g.post_type=="firstshown"||g.post_type=="allshown"){e+='<div class="imBlogPostBody">',h.mediahtml!==null&&h.mediahtml!==undefined&&(e+=h.mediahtml),e+=h.body;if(h.sources.length>0){e+='<div class="imBlogSources">',e+="<b>"+f("blog_sources")+":</b><br />",e+="<ul>";for(var k=0;k<h.sources.length;k++)e+="<li>"+h.sources[k]+"</li>";e+="</ul></div>"}e+=(g.addThis!==null&&g.addThis!==undefined?"<br />"+g.addThis:"")+"<br /><br /></div>"}else e+='<div class="imBlogPostSummary">'+h.summary+"</div>";return c===0&&(e+='<div class="imBlogPostRead"><a class="imCssLink" href="?id='+a+'">'+f("blog_read_all")+" &#187;</a></div>"),c!==0&&g.comments&&(g.comment_type!="stars"?(e+='<div class="topic-comments">',e+='<div class="topic-summary">',e+="<div>"+f("blog_no_comment")+"</div>",e+="</div>",e+='<div class="topic-form">',e+='<form id="blogComment" action="#">',e+='<div class="topic-form-row">',e+='<label for="form_name" style="float: left; width: 100px;">'+f("blog_name")+'*</label> <input type="text" id="form_name" name="name" class="mandatory" />',e+="</div>",e+='<div class="topic-form-row">',e+='<label for="form_email" style="float: left; width: 100px;">'+f("blog_email")+'*</label> <input type="text" id="form_email" name="email" class="mandatory valEmail" />',e+="</div>",e+='<div class="topic-form-row">',e+='<label for="form_url" style="float: left; width: 100px;">'+f("blog_website")+'</label> <input type="text" id="form_url" name="url" />',e+="</div>",g.comment_type!="comment"&&(e+='<div class="topic-form-row">',e+='<label for="blog-rating" style="float: left; width: 100px;vertical-align: middle;">'+f("blog_rating")+"*</label>",e+='<span class="topic-star-container-big variable-star-rating">',e+='<span class="topic-star-fixer-big" style="width: 0;"></span>',e+="</span>",e+="</div>"),e+='<div class="topic-form-row">',e+='<label for="form_body" style="clear: both; width: 100px;">'+f("blog_message")+'*</label><textarea id="form_body" name="body" class="mandatory" style="width: 99%; height: 100px;"></textarea>',e+="</div>",g.captcha&&(e+='<div class="topic-form-row" style="text-align: center">',e+='<label for="imCpt" style="float: left;">'+f("form_captcha_title")+'</label>&nbsp;<input type="text" id="imCpt" name="imCpt" class="imCpt[5,../]" size="5" style="width: 120px; margin: 0 auto;" />',e+="</div>"),e+='<div class="topic-form-row" style="text-align: center; margin-bottom: 15px;"><input type="button" value="'+f("blog_send")+'" class="imBlogCommentSubmitBtn" onclick="x5engine.imBlog.offlineCheck()"/></div>',e+="</form>",e+="</div>",e+="</div>"):(e+='<div style="text-align: center" class="topic-comments">',e+='<div style="margin-bottom: 5px;">'+f("blog_vote","Average Vote")+": 0/5</div>",e+='<div class="topic-star-container-big variable-star-rating">',e+='<span class="topic-star-fixer-big" style="width: 0%;"></span>',e+="</div>",e+="</div>")),e},offlineCheck:function(){b.imForm.validate("#blogComment",{type:"tip",showAll:!0})&&b.utils.showOfflineMessage(b.l10n.get("blog_offline_message"))},showCategory:function(a){var c="",d=b.settings.imBlog.posts_cat[a],e=b.utils.getParam("start"),f=b.utils.getParam("length");e=e?Math.max(e,0):0,f=f?Math.max(f,1):5;if(d===undefined||d===null)return;if(d.length>0){for(var g=e;g<(d.length<e+f?d.length:e+f);g++)g>e&&(c+=b.imBlog.separator),c+=b.imBlog.showPost(d[g],0,g==e?1:0);c+=b.imBlog.paginate("?category="+a+"&",e,f,d.length)}else c+='<div class="imBlogEmpty">Empty category</div>';return c},showMonth:function(a){var c="",d=b.settings.imBlog.posts_month[a],e=b.utils.getParam("start"),f=b.utils.getParam("length");e=e?Math.max(e,0):0,f=f?Math.max(f,1):5;if(d===undefined||d===null)return;if(d.length>0){for(var g=e;g<(d.length<e+f?d.length:e+f);g++)g>e&&(c+=b.imBlog.separator),c+=b.imBlog.showPost(d[g],0,g==e?1:0);c+=b.imBlog.paginate("?month="+a+"&",e,f,d.length)}else c+='<div class="imBlogEmpty">Empty month</div>';return c},showSearch:function(a){var c="",d=b.settings.imBlog.posts_ids,e=0,f=b.utils.getParam("start"),g=b.utils.getParam("length"),h=[],i=0;f=f?Math.max(f,0):0,g=g?Math.max(g,1):5;if(d===undefined||d===null)return;if(d.length>0){for(i=0;i<d.length;i++){var j=b.settings.imBlog.posts[d[i]];(j.title.indexOf(a)!=-1||j.summary.indexOf(a)!=-1||j.body.indexOf(a)!=-1)&&h.push(j)}for(i=f;i<(h.length<f+g?h.length:f+g);i++)i>f&&(c+=b.imBlog.separator),c+=b.imBlog.showPost(h[i].id,0,i==f?1:0);c+=b.imBlog.paginate("?search="+a+"&",f,g,h.length),h.length===0&&(c+='<div class="imBlogEmpty">Empty search</div>')}else c+='<div class="imBlogEmpty">Empty blog</div>';return c},showLast:function(a){var c=b.settings.imBlog.posts_ids,d="",e=b.utils.getParam("start"),f=b.utils.getParam("length");e=e?Math.max(e,0):0,f=f?Math.max(f,1):5;if(c===undefined||c===null)return;if(c.length>0){for(var g=e;g<(c.length<e+f?c.length:e+f);g++)g>e&&(d+=b.imBlog.separator),d+=b.imBlog.showPost(c[g],0,g===e?1:0);d+=b.imBlog.paginate("?",e,f,c.length)}else d+='<div class="imBlogEmpty">Empty blog</div>';return d},showTag:function(a){var c=b.settings.imBlog.posts_ids,d="",e=[],f=b.utils.getParam("start"),g=b.utils.getParam("length");f=f?Math.max(f,0):0,g=g?Math.max(g,1):5;if(c===undefined||c===null)return;if(c.length>0){for(var h=0;h<c.length;h++){var i=b.settings.imBlog.posts[c[h]].tag,j=!1;for(var k=0;k<i.length;k++)i[k]==a&&e.push(b.settings.imBlog.posts[c[h]])}for(h=f;h<(f+g<e.length?f+g:e.length);h++)f>0&&(d+=b.imBlog.separator),d+=b.imBlog.showPost(c[h],0,h==f?1:0)}else d+='<div class="imBlogEmpty">Empty blog</div>';return d},show:function(){var c=b.imBlog,d=b.utils.getParam,e=a("#imBlogContent");b.utils.isOnline()||(e.empty(),d("id")!==null?e.append(c.showPost(d("id"),1)):d("category")!==null?e.append(c.showCategory(d("category"))):d("tag")!==null?e.append(c.showTag(d("tag"))):d("month")!==null?e.append(c.showMonth(d("month"))):d("search")!==null?e.append(c.showSearch(d("search"))):e.append(c.showLast(10)),b.topic({target:".topic-comments"}),a("#imContent").change())}}})})(_jq,x5engine),function(a,b){"use strict",a.extend(b.utils,{offlineMessageTimeout:null,showOfflineMessage:function(c,d,e){if(b.utils.isOnline())return!1;if(a("#imMsgBox").length>0&&a("#imMsgBox").html().indexOf(c)!==-1)return!0;var f=function(){a("#imMsgBoxF").height(a("#imMsgBox").outerHeight())};a("#imMsgBox, #imMsgBoxF").remove(),d=d||"",e=e||"#FFFFE1";var g="z-index: 10200; position: fixed; top: 0; left: 0; right: 0; padding: 8px; background-color: "+e+"; font-family: Tahoma; font-size: 8pt; border-bottom: 1px solid gray;",h=a("body");a("#imMsgBox").length===0&&(h.prepend('<div id="imMsgBoxF">&nbsp;</div>'),h.prepend('<div id="imMsgBox" style="'+g+'">'+(d!==""?'<img style="float: left;" src="'+d+'" />':"")+'<span style="float: left;">'+c+'</span><span id="imMsgBoxClose" style="float: right; cursor: pointer;"><b>X</b></span></div>'));var i=a("#imMsgBox, #imMsgBoxF"),j=a(window);return f(),i.fadeOut(0).slideDown("slow"),j.unbind("resize",f).resize(f),a("#imMsgBoxClose").unbind("click").click(function(){i.slideUp("slow",function(){i.remove()})}),!0}})}(_jq,x5engine);