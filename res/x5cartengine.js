(function(a,b,c){"use strict",a.extend(!0,b.cart,{ecommerce:function(d){d=a.extend(!0,{settings:{indexpage:"index.html",vat:0,vattype:"none",currency:"â‚¬",currency_id:"EUR",currency_format:"#.###,@@[C]",post_url:"x5cart.php",order_no_format:"[yy][mm][dd]-[A-Z][0-9][A-Z][0-9]",form_autocomplete:!0,form_validation:"tip",showShipmentFields:!1,continue_shopping_page:"index.html",remove_from_cart_icon:"cart/images/cart-remove.png",add_to_cart_icon:"cart/images/cart-add.png",minimumAmount:0,currencies:["USD","EUR"],cartCookie:"x5CartProducts",formCookie:"x5CartForm"},products:{},shippings:{},payments:{},form:{fields:{},agreement:"",acceptAgreement:!1}},d);var e={},f=null,g=null,h={},i=0,j={},k=0,l=null,m=0,n={},o={},p="",q=this,r={"x5cart.priceChanged":a.Callbacks(),"x5cart.quantityChanged":a.Callbacks()};for(var s in d.shippings)d.shippings[s]&&(k++,j[s]=new b.cart.shipping(d.shippings[s]));for(var t in d.payments)d.payments[t]&&(i++,h[t]=new b.cart.payment(d.payments[t]));var u=function(){var a=q.goodsWeight(),b=q.goodsPrice(d.vattype!="included");for(var c in j){var e=j[c];e.goodsWeight(a),e.goodsAmount(b)}r["x5cart.priceChanged"].fire()};this.formatCurrency=function(a,c,e){e=e||d.settings.currency,c=c||d.settings.currency_format,c.match(/(\[C\])?[#]+(,|\.)?[#]+(,|\.)?([@]*)(\[C\])?/gi);var f=b.utils,g=RegExp.$2,h=RegExp.$3,i=RegExp.$4,j=RegExp.$1,k=RegExp.$5,l="",m=f.round(a,i.length),n=0|m,o=f.round(m-n,i.length),p=0,q;n+="",p=n.length;for(q=p-1;q>=0;q--)(p-q-1)%3===0&&p-q-1>0&&(l=g+l),l=n.charAt(q)+l;if(i.length){o=(o+"").replace(/0\./,"").substring(0,i.length);while(o.length<i.length)o+="0";l+=h+o}return(j?e+" ":"")+l+(k?" "+e:"")},this.settings=function(b){return b&&a.extend(d.settings,b),d.settings},this.form=function(){return d.form},this.add=function(a,c,f,g,h){var i=new b.cart.product(d.products[a],{quantity:c,option:f,suboption:g}),j=i.hash();return j in e&&!h&&i.quantity(e[j].quantity()+c),e[j]=i,u(),r["x5cart.quantityChanged"].fire(),this.save(),j},this.remove=function(a){if(e[a]===null||e[a]===undefined)return!1;var b={};for(var c in e)c!=a&&(b[c]=e[c]);return e=b,u(),r["x5cart.quantityChanged"].fire(),this.save(),!0},this.update=function(a,c,d,f){if(a in e){var g=e[a];if(d&&g.option()!=d||!isNaN(f)&&g.subOption()!=f){var h=this.add(g.id(),c,d?d:g.option(),isNaN(f)?g.subOption():f);this.remove(a),u(),this.save(),a=h}else e[a].quantity()!=c&&(e[a].quantity(c),u(),r["x5cart.quantityChanged"].fire(),this.save());return a}throw{message:b.l10n.get("cart_product_unknown","Unknown product")}},this.cart=function(){return e},this.count=function(a){a=a?a:!1;var b=0;for(var c in e)b+=a?e[c].quantity():1;return b},this.category=function(a){var c={},e=null;for(var f in d.products)e=d.products[f],e.category==a&&(c[f]=new b.cart.product(d.products[e.id],{quiet:!0}));return c},this.store=function(a){var c;if(a)return a in d.products?(c=d.products[a],new b.cart.product(c,{quiet:!0})):null;var e={},f;for(c in d.products)f=d.products[c],e[c]=new b.cart.product(f,{quiet:!0});return e},this.shippings=function(){return j},this.shippingsCount=function(){return k},this.payments=function(){return h},this.paymentsCount=function(){return i},this.payment=function(a,b){return b=b===null||b===undefined?!0:b,a&&h[a]&&(g=a,b&&this.save()),r["x5cart.priceChanged"].fire(),g!==null&&h[g]?h[g]:null},this.shipping=function(a,b){return b=b===null||b===undefined?!0:b,a&&j[a]&&(f=a,b&&this.save()),r["x5cart.priceChanged"].fire(),f!==null&&j[f]?j[f]:null},this.userInvoiceData=function(a,b){return b=b===null||b===undefined?!0:b,a!==null&&a!==undefined&&(n=a,b&&this.save()),n?n:[]},this.userShippingData=function(a,b){return b=b===null||b===undefined?!0:b,a!==null&&a!==undefined&&(o=a,b&&this.save()),o},this.goodsVat=function(){return this.goodsPrice(!0)-this.goodsPrice(!1)},this.vat=function(){return this.goodsVat()+(f&&j[f]?j[f].vat():0)+(g&&h[g]?h[g].vat():0)},this.fullPrice=function(a){return this.goodsFullPrice(a)+(f&&j[f]?j[f].price(a):0)+(g&&h[g]?h[g].price(a):0)},this.price=function(a){var b=this.goodsPrice(a)+(f&&j[f]?j[f].price(a):0)+(g&&h[g]?h[g].price(a):0);return Math.max(0,b-b*m)},this.goodsFullPrice=function(a){var b=0;for(var c in e)e[c]&&(b+=e[c].fullPrice(a));return b},this.goodsPrice=function(a){var b=0;for(var c in e)e[c]&&(b+=e[c].price(a));return b},this.goodsWeight=function(){var a=0;for(var b in e)e[b]&&(a+=e[b].weight());return a},this.canSetOrder=function(){var a={success:!1,message:""};return this.count()===0?a.message=b.l10n.get("cart_err_emptycart"):k>0&&this.shipping()===null?a.message=b.l10n.get("cart_err_shipping"):i>0&&this.payment()===null?a.message=b.l10n.get("cart_err_payment"):d.settings.minimumAmount>this.goodsPrice(d.settings.vattype=="included")?a.message=b.l10n.get("cart_err_minimum_price").replace(/\[PRICE\]/g,this.formatCurrency(d.settings.minimumAmount)):a.success=!0,a},this.paymentHTML=function(){var a=this.payment()?this.payment().html():"",e=b.utils.htmlspecialchars,f,g,h,i,j=!0,k=this.userInvoiceData(),l=this.userShippingData(),m=["Name","LastName","Address1","Address2","City","StateRegion","Country","ZipPostalCode","Email","Phone","Adverts","Note"];if(a==="")return"";a=a.replace(/\[ORDER_NO\]/g,p).replace(/\[HESCAPE_ORDER_NO\]/g,e(p)).replace(/\[UESCAPE_ORDER_NO\]/g,c.escape(p)),f=this.formatCurrency(this.price(j),d.settings.currency_format),a=a.replace(/\[PRICE\]/g,f).replace(/\[HESCAPE_PRICE\]/g,e(f)).replace(/\[UESCAPE_PRICE\]/g,c.escape(f));while(i=a.match(/\[PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/))f=this.price(j)*parseInt(i[1],10),f=this.formatCurrency(f.toString(),i[2]),h=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),a=a.replace(new RegExp(h,"g"),f);while(i=a.match(/\[(H|U)ESCAPE_PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/))f=this.price(j)*parseInt(i[2],10),f=this.formatCurrency(f.toString(),i[3]),h=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),a=a.replace(new RegExp(h,"g"),RegExp.$1=="U"?c.escape(f):e(f));for(var n=0;n<m.length;n++){var o=m[n],q=o.toUpperCase(),r=k[o]?k[o].value:"",s=l[o]?l[o].value:"";a=a.replace(new RegExp("\\["+q+"\\]","g"),r).replace(new RegExp("\\[HESCAPE_"+q+"\\]","g"),e(r)).replace(new RegExp("\\[UESCAPE_"+q+"\\]","g"),c.escape(r)).replace(new RegExp("\\[SHIPPING_"+q+"\\]","g"),s).replace(new RegExp("\\[HESCAPE_SHIPPING_"+q+"\\]","g"),e(s)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+q+"\\]","g"),c.escape(s))}return a},this.setOrder=function(c){var f=this.canSetOrder(),g={},h={},i,j,k,l;if(f.success!==!0){a.isFunction(c)&&c({success:!1,message:f});return}p=function(){var a=d.settings.order_no_format,b=new Date,c=b.getDate(),e=b.getMonth()+1,f=b.getFullYear().toString().substring(2);parseInt(c,10)<10&&(c="0"+c),parseInt(e,10)<10&&(e="0"+e),a=a.replace(/\[dd\]/g,c).replace(/\[mm\]/g,e).replace(/\[yy\]/g,f).replace(/\[yyyy\]/g,b.getFullYear());while(a.indexOf("[A-Z]")!=-1)a=a.replace("[A-Z]",String.fromCharCode(Math.round(Math.random()*25+65)));while(a.indexOf("[a-z]")!=-1)a=a.replace("[a-z]",String.fromCharCode(Math.round(Math.random()*25+97)));while(a.indexOf("[0-9]")!=-1)a=a.replace("[0-9]",Math.round(Math.random()*9));return a}();var m={success:!0,orderNo:p,shipping:this.shipping(),payment:this.payment(),cart:this.cart(),userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData()};this.save();if(!b.utils.isOnline())a.isFunction(c)&&c(m);else{for(k in e)l=e[k],i="options"in l.base()&&l.option()&&l.base().options[l.option()]?l.base().options[l.option()].name:null,j=i&&"suboptions"in l.base().options[l.option()]?l.base().options[l.option()].suboptions[l.subOption()]:null,g[k]={name:l.base().name,description:l.base().description,option:i,suboption:j,rawSinglePrice:l.singlePrice(!1),rawSinglePricePlusVat:l.singlePrice(!0),rawSingleFullPrice:l.singleFullPrice(!1),rawSingleFullPricePlusVat:l.singleFullPrice(!0),rawPrice:l.price(!1),rawPricePlusVat:l.price(!0),rawFullPrice:l.fullPrice(!1),rawFullPricePlusVat:l.fullPrice(!0),rawSingleVat:l.singleVat(),rawVat:l.vat(),singlePrice:this.formatCurrency(l.singlePrice(!1)),singlePricePlusVat:this.formatCurrency(l.singlePrice(!0)),singleFullPrice:this.formatCurrency(l.singleFullPrice(!1)),singleFullPricePlusVat:this.formatCurrency(l.singleFullPrice(!0)),price:this.formatCurrency(l.price(!1)),pricePlusVat:this.formatCurrency(l.price(!0)),fullPrice:this.formatCurrency(l.fullPrice(!1)),fullPricePlusVat:this.formatCurrency(l.fullPrice(!0)),vat:this.formatCurrency(l.vat()),singleVat:this.formatCurrency(l.singleVat()),quantity:l.quantity()};h={orderNo:p,userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData(),products:g,rawTotalPrice:this.price(!1),rawTotalPricePlusVat:this.price(!0),rawTotalVat:this.vat(),totalPrice:this.formatCurrency(this.price(!1)),totalPricePlusVat:this.formatCurrency(this.price(!0)),totalVat:this.formatCurrency(this.vat()),currency:d.settings.currency_id},this.shipping()&&(h=a.extend(h,{shipping:{name:this.shipping().name(),description:this.shipping().description(),email_text:this.shipping().email(),price:this.formatCurrency(this.shipping().price(!1)),pricePlusVat:this.formatCurrency(this.shipping().price(!0)),rawPrice:this.shipping().price(!1),rawPricePlusVat:this.shipping().price(!0),vat:this.formatCurrency(this.shipping().vat()),rawVat:this.shipping().vat()}})),this.payment()&&(h=a.extend(h,{payment:{name:this.payment().name(),description:this.payment().description(),price:this.formatCurrency(this.payment().price(!1)),pricePlusVat:this.formatCurrency(this.payment().price(!0)),rawPrice:this.payment().price(!1),rawPricePlusVat:this.payment().price(!0),email_text:this.payment().email(),vat:this.formatCurrency(this.payment().vat()),rawVat:this.payment().vat(),html:this.paymentHTML()}})),a.ajax({url:d.settings.post_url+"?action=sndrdr&"+Math.round(Math.random()*1e4),type:"POST",dataType:"json",data:{orderData:h},success:function(b){b!==null&&b!==undefined&&"orderNo"in b?(p=b.orderNo,m.orderNo=b.orderNo):(m.success=!1,m.message="Unable to set your order"),a.isFunction(c)&&c(m)},error:function(){a.isFunction(c)&&c({success:!1,message:"Error while sending your order"})}})}},this.orderNumber=function(){return p},this.empty=function(a){a=a===null||a===undefined?!0:a,f=g=l=p=null,e={},r["x5cart.priceChanged"].fire(),r["x5cart.quantityChanged"].fire(),a&&this.save()},this.save=function(){var a=[],b={crt:[],shp:null,pay:null,cpn:null,orderNo:null},h=!1;f&&(b.shp=f),g&&(b.pay=g),p&&(b.orderNo=p);for(var i in e){var j=e[i],k={id:j.id(),qnt:j.quantity(),opt:null,sopt:null};j.option()&&(k.opt=j.option(),j.subOption()&&(k.sopt=j.subOption())),b.crt.push(k)}c.localStorage.setItem(d.settings.cartCookie,JSON.stringify(b)),c.localStorage.setItem(d.settings.formCookie,JSON.stringify({ivc:this.userInvoiceData(),shp:this.userShippingData()}))},this.load=function(){try{var a=JSON.parse(c.localStorage.getItem(d.settings.cartCookie,null)),h=JSON.parse(c.localStorage.getItem(d.settings.formCookie,null));if(a){if("crt"in a){e={};for(var i=0;i<a.crt.length;i++){var j=a.crt[i],k,m;d.products[j.id]&&(k=new b.cart.product(d.products[j.id],{quantity:j.qnt*1,option:j.opt,suboption:j.sopt}),e[k.hash()]=k)}}"shp"in a&&d.shippings[a.shp]?f=a.shp:f=null,"pay"in a&&d.payments[a.pay]?g=a.pay:g=null,l=null,"orderNo"in a?p=a.orderNo:p=null,u()}return h&&(n="ivc"in h?h.ivc:{},o="shp"in h?h.shp:{}),!0}catch(q){}return!1},this.bind=function(a,b){return a in r?r[a].has(b)?this:(r[a].add(b),this):this},this.unbind=function(a,b){return a in r?(b?r[a].remove(b):r[a].empty(),this):this},this.load()}})})(_jq,x5engine,window),function(a,b){"use strict",a.extend(!0,b.cart,{product:function(c,d){var e=a.extend(!0,{id:null,id_user:null,category:null,description:"",price:0,images:[],link:null,vat:0,vattype:"none",weight:0,avail:"unknown",precision:5,options:{},discount:{type:"relative",amount:0,coupon:!1},quantityDiscounts:{},minQuantity:0},c),f=a.extend(!0,{quantity:e.minQuantity>0?e.minQuantity:1,quiet:!1,option:null,suboption:null},d),g=!1,h=function(a,b){return b[0]===null||b[0]===undefined?0:b[0]};this.hash=function(){return b.utils.imHash(this.id()+(f.option?f.option:"")+(isNaN(f.suboption)?"":f.suboption))},this.base=function(){return a.extend(!0,e,{optionsLength:function(){var a=0;for(var b in e.options)e.options.hasOwnProperty(b)&&a++;return a}})},this.id=function(){return e.id},this.quantity=function(a){if(a){if(isNaN(a)||!/[0-9]+/.test(a)||parseInt(a,10)<1)throw{name:"Product Quantity",message:b.l10n.get("cart_err_qty")};if(e.minQuantity>a&&!f.quiet)throw{name:"Product Quantity",message:b.l10n.get("cart_err_quantity").replace(/\[QUANTITY\]/g,e.min_quantity)};f.quantity=a}return f.quantity},this.option=function(a){return a&&a in e.options&&(f.option=a,"suboptions"in e.options[a]&&f.suboption===null&&(f.suboption=0)),f.option},this.subOption=function(a){return a&&f.option in e.options&&a in e.options[f.option].suboptions&&(f.suboption=a),f.suboption},this.discount=function(a){var b=0,c=e.discount,d=0,h=0;if(!c.coupon||c.coupon&&g)switch(c.type){case"absolute":b+=c.amount;break;case"relative":b+=this.singleFullPrice(a)*c.amount}for(var i in e.quantityDiscounts)f.quantity>=parseFloat(i,10)&&h<e.quantityDiscounts[i]&&(d=i,h=e.quantityDiscounts[d]);return h&&(b+=(this.singleFullPrice(a)-b)*h),b},this.singleFullPrice=function(a){var b=e.price,c=e.options[this.option()];return c&&"pricevar"in c&&(b+=c.pricevar),(b*(a?1+e.vat:1)).toFixed(e.precision)*1},this.singlePrice=function(a){var b=0;switch(e.vattype){case"excluded":b=(this.singleFullPrice(!1)-this.discount(!1))*(a?1+e.vat:1);break;case"included":b=(this.singleFullPrice(!0)-this.discount(!0))/(a?1:1+e.vat);break;default:b=this.singleFullPrice(!1)-this.discount(!1)}return Math.max(0,b)},this.fullPrice=function(a){return this.singleFullPrice(a)*f.quantity},this.price=function(a){return this.singlePrice(a)*f.quantity},this.singleVat=function(){return this.singlePrice(!1)*e.vat},this.fullVat=function(){return this.fullPrice(!1)*e.vat},this.vat=function(){return this.price(!1)*e.vat},this.weight=function(){var a=e.weight,b=e.options[this.option()];return b&&"weightvar"in b&&(a+=b.weightvar),a*f.quantity},this.enableCoupon=function(){return e.discount.coupon!==!1?(g=!0,!0):!1},this.disableCoupon=function(){return g=!1,!0};if(e.avail=="notavailable"&&!f.quiet)throw{name:"Product Quantity",message:b.l10n.get("cart_product_notavailable","The product is not available now")};this.quantity(f.quantity);if(f.option===null)for(var i in e.options){this.option(i);break}else this.option(f.option)}})}(_jq,x5engine),function(a,b){"use strict",a.extend(!0,b.cart,{shipping:function(b){b=a.extend(!0,{id:null,name:"",description:"",precision:5,vat:0,type:"FIXED",price:0,email:"",image:""},b);var c=0,d=0;this.base=function(){return b},this.id=function(){return b.id},this.name=function(){return b.name},this.description=function(){return b.description},this.goodsAmount=function(a){return c=a,!0},this.goodsWeight=function(a){return d=a,!0},this.image=function(){return b.image},this.price=function(a){var e,f=0,g=0,h,i=0;switch(b.type){case"WEIGHT":for(h in b.price)d>=parseFloat(h,10)&&(f=h,g=b.price[f]);i=g*(a?1+b.vat:1);break;case"AMOUNT":for(h in b.price)c>=parseFloat(h,10)&&(f=h,g=b.price[f]);i=g*(a?1+b.vat:1);break;default:i=b.price*(a?1+b.vat:1)}return i.toFixed(b.precision)*1},this.vat=function(){return b.vat*this.price()},this.email=function(){var a=b.email;return a===null||a===undefined||a===""?"":a}}})}(_jq,x5engine),function(a,b){"use strict",a.extend(!0,b.cart,{payment:function(b){b=a.extend(!0,{id:null,name:"",description:"",image:"",email:"",precision:5,vat:0,price:0,html:""},b),this.base=function(){return b},this.id=function(){return b.id},this.price=function(a){return(b.price+(a?this.vat():0)).toFixed(b.precision)*1},this.vat=function(){return b.vat*this.price(!1)},this.name=function(){return b.name},this.description=function(){return b.description},this.html=function(){var a=b.html;return a===null||a===undefined||a===""?"":a},this.email=function(){var a=b.email;return a===null||a===undefined||a===""?"":a},this.image=function(){return b.image}}})}(_jq,x5engine),function(a,b,c){"use strict",a.extend(!0,b.cart.ui,{show:function(){var d=a("#cartLoading"),e=a("#imCartContainer"),f=b.cart.manager,g=f.settings(),h=g.vattype,i=b.cart.ui.iconSize,j=b.cart.ui.showProductIcons,k=b.l10n.get,l=a('<h2 style="text-align: center">'+k("cart_err_emptycart")+"</h2>").after(a("<div />").css({"text-align":"center","margin-top":20}).append(a('<input type="button" value="'+k("cart_continue_shopping")+'" />').click(b.cart.ui.resumeShopping))),m=function(c){var d=b.cart.ui.steps,e=0,f,g,h=a("body"),i=a("<div />");for(f=0;f<c;f++)e-=d.image.steps[f].height;for(f=0;f<d.image.steps.length;f++){var j=a("<span>"+k("cart_step"+(f+1)+"_header","Step description "+(f+1))+"</span>").css(d.font).css({"text-align":"center",position:"absolute",top:-1e3});h.append(j),g=j.outerWidth(!0),j.remove(),i.append(j.css({left:d.image.steps[c].offsetX[f]-g/2,top:d.image.steps[c].offsetY[f]})),f===c&&j.css("color",d.font.activeColor)}return i.width(d.image.width).height(d.image.steps[c].height).css({"background-image":"url('"+b.settings.currentPath+d.image.url+"')","background-position":"0 "+e+"px",margin:"0 auto",position:"relative"})},n=function(a,b,c,d,e){var g="";c=c&&c!==1?' colspan="'+(h!="none"?c:c-2)+'"':"",e=e!==null&&e!==undefined?e:!1;switch(h){case"excluded":return g+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head" style="width:15%;">'+k("cart_total")+"</td>"+'<td class="text-right" colspan="2">'+f.formatCurrency(a)+"</td>"+"</tr>"+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head">'+k("cart_vat")+"</td>"+'<td class="text-right" colspan="2" style="width:'+d+'%">'+f.formatCurrency(b)+"</td>"+"</tr>"+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head" style="border-bottom: none;">'+k("cart_total_vat")+"</td>"+'<td class="text-right" colspan="2">'+f.formatCurrency(a+b)+"</td>"+"</tr>";case"included":return g+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head" style="width:15%;">'+k("cart_total_vat")+"</td>"+'<td class="text-right" colspan="2" style="width:'+d+'%">'+f.formatCurrency(a+b)+"</td>"+"</tr>"+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head" style="border-bottom: none;"">'+k("cart_vat_included","VAT (Included)")+"</td>"+'<td class="text-right" colspan="2">'+f.formatCurrency(b)+"</td>"+"</tr>";case"none":return g+'<tr class="vertical-middle">'+"<td"+c+' class="invisible"></td>'+'<td class="head" style="width:15%; border-bottom: none;">'+k("cart_total")+"</td>"+'<td class="text-right" colspan="2" style="width:'+d+'%">'+f.formatCurrency(a)+"</td>"+"</tr>"}},o=function(){var b=a("#imContent");a("#imCartContainer img").one("load",function(){b.trigger("change")}),b.trigger("change")},p=function(c){var d="",g=f.category(c),l,m,n,p=!1,q=!1,r=0;a(".imTip").remove(),e.empty();for(n in g)if(g[n].base().optionsLength()>0){p=!0;break}e.append('<h2 id="imPgTitle" class="imTitleMargin">'+k("cart_category")+"</h2>").append("<p>"+k("cart_step1_descr")+"</p>"),d+='<table class="cartTable"><thead><tr><td class="first-x">'+k("cart_descr")+"</td>"+(p?"<td>"+k("cart_opt")+"</td>":"")+"<td>"+k("cart_price")+"</td>"+(h!=="none"?"<td>"+k("cart_vat")+"</td>":"")+"<td>"+k("cart_qty")+"</td>"+'<td class="last-x"></td>'+"</tr>"+"</thead>"+"<tbody>";for(n in g){l=g[n],d+="<tr><td>"+(j&&l.base().images.length?'<img src="../'+l.base().images[0]+'" alt="'+l.base().name+'" style="float: left; margin: 5px 5px 5px 0; width: '+i+'px;" />':"")+"<b>"+l.base().name+"</b><p>"+l.base().description+"</p></td>"+"</td>";if(p){q=null,d+="<td>";if(l.base().optionsLength()>0){d+='<select data-hash="'+n+'" data-type="option" id="opt-'+n+'">';for(var s in l.base().options)q===null&&(q="suboptions"in l.base().options[s]&&l.base().options[s].suboptions.length>0?s:!1),d+='<option value="'+s+'">'+l.base().options[s].name+"</option>";d+="</select>";if(q){var t=l.base().options[q].suboptions;d+='<select data-hash="'+n+'" id="subopt-'+n+'">';for(var u=0;u<t.length;u++)d+='<option value="'+u+'">'+t[u]+"</option>";d+="</select>"}}d+="</td>"}d+='<td id="price-'+n+'">'+f.formatCurrency(l.singlePrice(h=="included"))+"</td>"+(h!=="none"?'<td id="vat-'+n+'">'+f.formatCurrency(l.vat())+"</td>":"")+"<td>"+'<input size="2" type="text" value="'+l.quantity()+'" id="qty-'+n+'" class="text-right">'+"</td>"+'<td style="vertical-align: middle; text-align: center;">'+'<img src="../'+f.settings().add_to_cart_icon+'" data-type="add" data-hash="'+n+'" style="cursor: pointer;">'+"</td>"+"</tr>"}d+="</tbody></table>",d=a(d),d.find("tbody > tr:odd > td").not(".invisible").addClass("odd"),d.find("tr").each(function(){var b=a(this).find("td");b.first().addClass("first-x"),b.last().addClass("last-x")}),d.find("tr").last().find("td").addClass("last-y"),d.find("select[data-type=option]").change(function(){var b=a(this),c=b.attr("data-hash"),d=null;if(c&&(d=g[c])){var e,i=b.val();a("#subopt-"+c).remove();if("suboptions"in d.base().options[i]&&d.base().options[i].suboptions.length>0){e='<select id="subopt-'+c+'">';for(var j=0;j<d.base().options[i].suboptions.length;j++)e+='<option value="'+d.base().options[i].suboptions[j]+'">'+d.base().options[i].suboptions[j]+"</option>";e+="</select>",b.after(e)}b.attr("data-type")=="option"?g[c].option(b.val()):b.attr("data-type")=="suboption"&&g[c].subOption(b.val()),a("#price-"+c).html(f.formatCurrency(g[c].singlePrice(h=="included"))),h!="none"&&a("#vat-"+c).html(f.formatCurrency(g[c].singleVat()))}return!1}),d.find("img[data-type=add]").click(function(){var c=a(this),d=c.attr("data-hash");b.cart.ui.addToCart(g[d].id(),a("#qty-"+d).val(),a("#opt-"+d).val(),a("#subopt-"+d).val(),!0,"../")}),e.append(d),o()},q=function(){var d=null,p=null,r=null,s=null,t=null,u=null,v=null,w=function(){var b=f.cart(),l,m,o=!1,p=!1,r="",s="";for(r in b)if(b[r].option()!==null){o=!0;break}s='<div><table class="cartTable" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 0;"><thead><tr><td>'+k("cart_descr")+"</td>"+(o?'<td style="min-width: 80px;">'+k("cart_opt")+"</td>":"")+'<td style="min-width: 50px;">'+k("cart_price")+"</td>"+"<td>"+k("cart_qty")+"</td>"+(h!="none"?'<td style="width: 15%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: 15%;">'+k("cart_subtot")+"</td>"+'<td style="width: 4%;"></td>'+"</tr></thead><tbody>";for(r in b){l=b[r];if(l){m=l.base().options,p=!1,s+="<tr><td>"+(j&&l.base().images.length?'<img src="../'+l.base().images[0]+'" alt="'+l.base().name+'" style="float: left; margin: 5px 5px 5px 0; width: '+i+'px;" />':"")+"<b>"+l.base().name+"</b><p>"+l.base().description+"</p></td>";if(o){s+="<td>";if(l.base().optionsLength()>0){s+='<select data-type="option" data-hash="'+r+'" >';for(var t in m)s+='<option value="'+t+'"'+(l.option()==t?" selected":"")+">"+m[t].name+"</option>",l.option()==t&&(p=typeof l.base().options[t].suboptions=="object");s+="</select>";if(p){var u=l.base().options[l.option()].suboptions;s+='<select data-type="suboption" data-hash="'+r+'">';for(var v=0;v<u.length;v++)s+='<option value="'+v+'"'+(v==l.subOption()?" selected":"")+">"+u[v]+"</option>";s+="</select>"}}s+="</td>"}s+='<td class="text-right">'+f.formatCurrency(l.singlePrice(h=="included"))+(l.discount()>0?'<span style="text-decoration: line-through; margin-left: 5px;">'+f.formatCurrency(l.singleFullPrice(h=="included"))+"</span>":"")+"</td>"+'<td class="text-right"><input data-hash="'+r+'" type="text" size="2" value="'+l.quantity()+'" class="text-right"></td>'+(h!="none"?'<td class="text-right">'+f.formatCurrency(l.vat())+" ("+Number(l.base().vat*100).toFixed(2)+"%)"+"</td>":"")+'<td class="text-right">'+f.formatCurrency(l.price(h=="included"))+"</td>"+'<td><img data-hash="'+r+'" data-action="delete" style="vertical-align: middle; cursor: pointer;" src="../'+g.remove_from_cart_icon+'" alt="'+k("cart_remove")+'" title="'+k("cart_remove")+'" /></td>'+"</tr>"}}s+="</tbody></table>",s+='<table class="cartTable" cellpadding="0" cellspacing="0" border="0" style="margin-top: 0;"><tbody>'+n(f.goodsPrice(!1),f.goodsVat(),o?4:3,19)+"</tbody>"+"</table></div>",s=a(s),s.find("tbody > tr:odd > td").not(".invisible").addClass("odd"),s.find("table").each(function(b){var c=a(this).find("tr");c.each(function(d){var e=a(this).find("td").not(".invisible");e.first().addClass("first-x"),e.last().addClass("last-x"),b===0&&d==c.length-1&&e.last().css("border-radius",0),b==1&&d===0&&e.css({"border-top-left-radius":0,"border-top-right-radius":0,"border-top-color":"transparent"})}),c.last().find("td").not(".invisible").addClass("last-y")}),s.find("select").change(function(){var b=a(this),d=b.attr("data-hash"),e=null;if(d&&(e=f.cart()[d])){var g,h;b.attr("data-type")=="option"?(g=b.val(),h=e.base().options[g].suboptions?0:null):(g=e.option(),h=b.val());try{f.update(d,e.quantity()*1,g,h)}catch(i){c.alert(i.message)}w(),y(),x(),z()}return!1}),s.find("img[data-action=delete]").click(function(){var b=a(this).attr("data-hash");if(c.confirm(k("cart_remove_q"))&&b&&f.remove(b)){if(f.count()===0){q();return}w(),y(),x(),z()}return!1}),s.find("input").change(function(){var d=a(this),e=a(this).attr("data-hash"),g=d.val();if(b[e]){try{f.update(e,g,b[e].option(),b[e].subOption())}catch(h){c.alert(h.message)}w(),y(),x(),z()}return!1}),d===null?e.append(s):d.replaceWith(s),d=s},x=function(){var b=f.shippings(),c=f.shipping(),d=0,g="";if(f.shippingsCount()===0)return;g='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><thead><tr><td style="width: 20px"></td><td>'+k("cart_shipping")+"</td>"+(h!="none"?'<td style="width: 19%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: '+(h!="none"?15:19)+'%;">'+k("cart_price")+"</td>"+"</tr></thead><tbody>";for(var i in b)d++,g+='<tr><td><input type="radio" id="chk-shipping-'+i+'" name="shipping-method" data-id="'+i+'"'+(c&&c.id()==i?" checked":"")+"></td>"+"<td>"+(b[i].image()?'<img src="../'+b[i].image()+'" alt="'+b[i].name()+'" style="float: left; margin: 5px 5px 5px 0;"/>':"")+'<label for="chk-shipping-'+i+'"><b>'+b[i].name()+"</b><p>"+b[i].description()+"</p></label></td>"+(h!="none"?'<td class="text-right">'+f.formatCurrency(b[i].vat())+" ("+Number(b[i].base().vat*100).toFixed(2)+"%)"+"</td>":"")+'<td class="text-right">'+f.formatCurrency(b[i].price(h=="included"))+"</td>"+"</tr>";g+="</tbody></table>",g=a(g),g.find("tbody > tr:odd > td").not(".invisible").addClass("odd"),g.find("tr").each(function(){var b=a(this).find("td").not(".invisible");b.first().addClass("first-x"),b.last().addClass("last-x")}),g.find("tr").last().find("td").not(".invisible").addClass("last-y"),g.find("input[type=radio]").click(function(){var b=a(this).attr("data-id");b&&(f.shipping(b),z())}),p===null?e.append(g):p.replaceWith(g),p=g,d==1&&g.find("input[type=radio]").click()},y=function(){var b=f.payments(),c=f.payment(),d=0,g="";if(f.paymentsCount()===0)return;g='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><thead><tr><td style="width: 20px"></td><td>'+k("cart_payment")+"</td>"+(h!="none"?'<td style="width: 19%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: '+(h!="none"?15:19)+'%;">'+k("cart_price")+"</td>"+"</tr></thead><tbody>";for(var i in b)d++,g+='<tr><td><input type="radio" id="chk-payment-'+i+'" name="payment-method" data-id="'+i+'"'+(c&&c.id()==i?" checked":"")+"></td>"+"<td>"+(b[i].image()?'<img src="../'+b[i].image()+'" alt="'+b[i].name()+'" style="float: left; margin: 5px 5px 5px 0;"/>':"")+'<label for="chk-payment-'+i+'"><b>'+b[i].name()+"</b><p>"+b[i].description()+"</p></label></td>"+(h!="none"?'<td class="text-right">'+f.formatCurrency(b[i].vat())+" ("+Number(b[i].base().vat*100).toFixed(2)+"%)"+"</td>":"")+'<td class="text-right">'+f.formatCurrency(b[i].price(h=="included"))+"</td>"+"</tr>";g+="</tbody></table>",g=a(g),g.find("tbody > tr:odd > td").not(".invisible").addClass("odd"),g.find("tr").each(function(){var b=a(this).find("td").not(".invisible");b.first().addClass("first-x"),b.last().addClass("last-x")}),g.find("tr").last().find("td").not(".invisible").addClass("last-y"),g.find("input").click(function(){var b=a(this).attr("data-id");b&&(f.payment(b),z())}),r===null?e.append(g):r.replaceWith(g),r=g,d==1&&g.find("input[type=radio]").click()},z=function(){if(f.paymentsCount()===0&&f.shippingsCount()===0)return;var b,c='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><tbody>'+n(f.price(!1),f.vat(),null,19,!0)+"</tbody>"+"</table>";c=a(c),c.find("tbody > tr:odd > td").not(".invisible").addClass("odd"),b=c.find("tr"),b.each(function(){var b=a(this).find("td").not(".invisible");b.first().addClass("first-x"),b.last().addClass("last-x")}),b.first().find("td").not(".invisible").addClass("first-y"),b.last().find("td").not(".invisible").addClass("last-y"),s===null?e.append(c):s.replaceWith(c),s=c};a(".imTip").remove(),b.utils.scrollTo(0),e.empty();if(f.count()===0){e.append(l);return}b.cart.ui.steps.active&&e.append(m(0)),e.append('<h2 id="imPgTitle" class="imTitleMargin">'+k("cart_step1")+"</h2>"),e.append("<p>"+k("cart_step1_cartlist").replace("[FIELD]",k("cart_step1_gonext"))+"</p>"),w(),e.append("<p>"+k("cart_step1_shiplist").replace("[FIELD]",k("cart_step1_gonext"))+"</p>"),x(),y(),z(),u=a('<input type="button" value="'+k("cart_continue_shopping")+'" />').click(b.cart.ui.resumeShopping),v=a('<input type="button" id="btnempty" value="'+k("cart_empty_button")+'" />').click(function(){c.confirm(k("cart_empty"))&&(b.utils.scrollTo(0),f.empty(),b.cart.ui.show("step1"))}),t=a('<input type="button" id="btngonext" value="'+k("cart_step1_gonext",k("cart_gonext"))+'" />').click(function(){var a=f.canSetOrder();a.success!==!0?c.alert(a.message):c.top.location.hash="#step2"}),e.append(a("<div />").addClass("buttons-container").append(u).append(v).append(t)),o()},r=function(d){var h=null,i=null,j=f.userInvoiceData(),l=f.userShippingData(),n=a('<table class="userForm"/>'),p=a('<table class="userForm"/>'),q=f.form().fields,r,s,t;if(f.count()===0){c.top.location.href=g.indexpage+"#step1";return}a(".imTip").remove(),b.utils.scrollTo(0),e.empty(),b.cart.ui.steps.active&&e.append(m(1)),e.append('<h2 id="imPgTitle" class="imTitleMargin">'+k("cart_step2")+"</h2>").append("<p>"+k("cart_step2_descr").replace("[FIELD]",k("cart_step2_gonext"))+"</p>"),n.append("<caption>"+k("cart_vat_address")+"</caption>");for(s=0;s<q.length;s++)t=q[s],r=g.formAutocomplete&&j[t.id]?j[t.id].value:t.value?t.value:"",n.append('<tr style="vertical-align: middle;"><td style="width: 35%"><label for="'+t.id+'">'+t.name+(t.mandatory?"*":"")+" </label></td>"+(t.type!="TextArea"?'<td><input type="'+t.type+'" id="'+t.id+'" value="'+r+'" class="'+(t.mandatory?"mandatory ":"")+(t.filter?t.filter:"")+'"></td>':'<td><textarea id="'+t.id+'" class="'+(t.mandatory?"mandatory ":"")+(t.filter?t.filter:"")+'">'+r+"</textarea></td>")+"</td>");e.append(n.css("margin","0 auto"));var u=n.find("input").first();u.length&&u.val().length===0&&u.focus();if(g.showShipmentFields){var v=!1;p.append("<caption>"+k("cart_shipping_address")+"</caption>");for(s=0;s<q.length;s++)t=q[s],t.shipping&&(r=g.formAutocomplete&&l[t.id]?l[t.id].value:t.value?t.value:"",v=v||l[t.id]!==null&&l[t.id]!==undefined,p.append('<tr><td style="width: 35%"><label for="shipping-'+t.id+'">'+t.name+(t.mandatory?"*":"")+" </label></td>"+'<td><input id="shipping-'+t.id+'" type="'+t.type+'" value="'+r+'" class="'+(t.mandatory?"mandatory ":"")+(t.filter?t.filter:"")+'"></td>'+"</td>"));e.append(a('<div id="shippingForm" />').css({"text-align":"center",margin:"5px 0"}).append(a('<input type="checkbox" id="chk-shipping"'+(v?" checked":"")+" />").change(function(){a(this).prop("checked")?a("#shippingFormWrapper").slideDown(250,function(){a("#imContent").triggerHandler("change")}):a("#shippingFormWrapper").slideUp(250,function(){a("#imContent").triggerHandler("change")})})).append(a('<label for="chk-shipping">'+k("cart_shipping_option")+"</label>"))).append(p),p.css("margin","20px auto").wrap('<div id="shippingFormWrapper">'),v||a("#shippingFormWrapper").slideUp(0)}h=a('<input type="button" value="'+k("cart_step2_gonext",k("cart_gonext"))+'" />').click(function(){var d=b.imForm.validate,e={type:g.formValidation,showAll:!0,position:"right"};j={};for(s=0;s<q.length;s++)j[q[s].id]={label:q[s].name,value:a("#"+q[s].id).val()};f.userInvoiceData(j),l={};if(g.showShipmentFields&&a("#chk-shipping").prop("checked"))for(s=0;s<q.length;s++)q[s].shipping&&
(l[q[s].id]={label:q[s].name,value:a("#shipping-"+q[s].id).val()});f.userShippingData(l),d(n,e)&&(!g.showShipmentFields||!a("#chk-shipping").prop("checked")||a("#chk-shipping").prop("checked")&&d(p,e))&&(c.top.location.hash="#step3")}),i=a('<input type="button" value="'+k("cart_step2_goback",k("cart_goback"))+'" />').click(function(){c.top.location.hash="#step1"}),e.append(a("<div />").addClass("buttons-container").append(i).append(h)),o(),d&&b.utils.scrollTo("#"+d)},s=function(){var d=null,i=null,j=f.cart(),l=f.shipping(),p=f.payment(),q=f.userInvoiceData(),r=f.userShippingData(),s=f.form().agreement,t=null,u=null,v=null,w=null,x,y=!1,z="";if(f.count()===0){c.top.location.href=g.indexpage+"#step1";return}a(".imTip").remove(),b.utils.scrollTo(0);for(x in j)if(j[x].option()!==null){y=!0;break}e.empty(),b.cart.ui.steps.active&&e.append(m(2)),e.append('<h2 id="imPgTitle" class="imTitleMargin">'+k("cart_step3")+"</h2>").append("<p>"+k("cart_step3_descr").replace("[FIELD]",k("cart_step3_gonext"))+"</p>"),z+='<div><table cellpadding="0" cellspacing="0" border="0" class="cartTable"><thead><tr><td>'+(!g.showShipmentFields||g.showShipmentFields&&JSON.stringify(r)!="{}"?k("cart_vat_address"):k("cart_vat_address")+" / "+k("cart_shipping_address"))+"</td>"+(g.showShipmentFields&&JSON.stringify(r)!="{}"?'<td style="width: 4%;" class="invisible"></td><td style="width: 48%;">'+k("cart_shipping_address")+"</td>":"")+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<td>"+"<p>"+("Company"in q?q.Company.value+" - ":"")+("Name"in q?q.Name.value+" ":"")+("LastName"in q?q.LastName.value:"")+" "+("Email"in q?"("+q.Email.value+")":"")+"<br />"+("Address1"in q?q.Address1.value+"<br />":"")+("Address2"in q?q.Address2.value+"<br />":"")+("ZipPostalCode"in q?q.ZipPostalCode.value+", ":"")+("City"in q?q.City.value:"")+("StateRegion"in q?" ("+q.StateRegion.value+")":"")+("Country"in q&&q.Country.value?"<br />"+q.Country.value:"")+("Phone"in q&&q.Phone.value?"<br />"+q.Phone.value:"")+("Note"in q&&q.Note.value!==""?"<br /><u>"+q.Note.label+":</u> "+q.Note.value:"")+"</p>"+'<p style="text-align: right;"><a href="#step2" class="button">'+k("cart_edit","Edit")+"</a></p>"+"</td>"+(g.showShipmentFields&&JSON.stringify(r)!="{}"?'<td class="invisible"></td><td><p>'+("Company"in r?r.Company.value+" - ":"")+("Name"in r?r.Name.value+" ":"")+("LastName"in r?r.LastName.value:"")+" "+("Email"in r?"("+r.Email.value+")":"")+"<br />"+("Address1"in r?r.Address1.value+"<br />":"")+("Address2"in r?r.Address2.value+"<br />":"")+("ZipPostalCode"in r?r.ZipPostalCode.value+", ":"")+("City"in r?r.City.value:"")+("StateRegion"in r?" ("+r.StateRegion.value+")":"")+("Country"in r&&r.Country.value?"<br />"+r.Country.value:"")+("Phone"in r&&r.Phone.value?"<br />"+r.Phone.value:"")+("Note"in r&&r.Note.value!==""?"<br /><u>"+r.Note.label+":</u> "+r.Note.value:"")+"</p>"+'<p style="text-align: right;"><a href="#step2/shippingForm" class="button">'+k("cart_edit","Edit")+"</a></p>"+"</td>":"")+"</tr>"+"</tbody>"+"</table>",z+='<table cellpadding="0" cellspacing="0" border="0" class="cartTable" style="margin-bottom: 0"><thead><tr><td>'+k("cart_descr")+"</td>"+(y?'<td style="min-width: 80px;">'+k("cart_opt")+"</td>":"")+'<td style="min-width: 50px;">'+k("cart_price")+"</td>"+"<td>"+k("cart_qty")+"</td>"+(h!="none"?'<td style="width: 15%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: 15%;">'+k("cart_subtot")+"</td>"+"</tr></thead><tbody>";for(x in j)u=j[x],u&&(v=u.base().options,w=u.option(),z+="<tr><td><b>"+u.base().name+"</b><p>"+u.base().description+"</p></td>"+(y?"<td>"+(w&&v[w]?v[w].name:"")+(w&&v[w]&&u.subOption()?" "+v[w].suboptions[u.subOption()]:"")+"</td>":"")+'<td class="text-right">'+f.formatCurrency(u.singlePrice(h=="included"))+(u.discount()>0?'<span style="text-decoration: line-through; margin-left: 5px;">'+f.formatCurrency(u.singleFullPrice(h=="included"))+"</span>":"")+"</td>"+'<td class="text-right">'+u.quantity()+"</td>"+(h!="none"?'<td class="text-right">'+f.formatCurrency(u.vat())+" ("+Number(u.base().vat*100).toFixed(2)+"%)"+"</td>":"")+'<td class="text-right">'+f.formatCurrency(u.price(h=="included"))+"</td>"+"</tr>");z+="</tbody></table>",z+='<table cellpadding="0" cellspacing="0" border="0" class="cartTable" style="margin-top: 0;"><tbody>'+n(f.goodsPrice(!1),f.goodsVat(),y?4:3,15)+"</tbody>"+"</table>",l&&(z+='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><thead><tr><td>'+k("cart_shipping")+"</td>"+(h!="none"?'<td style="width: 15%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: 15%;" class="text-right">'+k("cart_price")+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<td>"+"<b>"+l.name()+"</b>"+"<p>"+l.description()+"</p>"+"</td>"+(h!="none"?'<td class="text-right">'+f.formatCurrency(l.vat())+"</td>":"")+'<td class="text-right">'+f.formatCurrency(l.price(h=="included"))+"</td>"+"</tr>"+"</tbody>"+"</table>"),p&&(z+='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><thead><tr><td>'+k("cart_payment")+"</td>"+(h!="none"?'<td style="width: 15%;">'+(h=="included"?k("cart_vat_included"):k("cart_vat"))+"</td>":"")+'<td style="width: 15%;" class="text-right">'+k("cart_price")+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<td><b>"+p.name()+"</b><p>"+p.description()+"</p></td>"+(h!="none"?'<td style="width: 15%;" class="text-right">'+f.formatCurrency(p.vat())+"</td>":"")+'<td style="width: 15%;" class="text-right">'+f.formatCurrency(p.price(h=="included"))+"</td>"+"</tr>"+"</tbody>"+"</table>"),l!==null&&p!==null&&(z+='<table cellpadding="0" cellspacing="0" border="0" class="cartTable"><tbody>'+n(f.price(!1),f.vat(),null,15,!0)+"</tbody>"+"</table>"),z+="</div>",z=a(z),e.append(z),z.find("table").each(function(b){var c=a(this).find("tr");a(this).find("tbody > tr:odd > td").not(".invisible").addClass("odd"),c.each(function(d){var e=a(this).find("td").not(".invisible");e.first().addClass("first-x"),e.last().addClass("last-x"),b===0&&e.addClass("first-x").addClass("last-x"),b==1&&d==c.length-1&&e.last().css("border-radius",0),b==2&&d===0&&e.css({"border-top-right-radius":0,"border-top-left-radius":0,"border-top-color":"transparent"})}),c.first().find("td").not(".invisible").addClass("first-y"),c.last().find("td").not(".invisible").addClass("last-y")}),s!==undefined&&s!==null&&s!==""&&(s=a(s),e.append(s),f.form().acceptAgreement&&(t=a("<div>").append('<input id="chk-agreement" type="checkbox" class="mandatory"><label for="chk-agreement">'+k("cart_agree","I Agree")+"</label>"),s.prepend(t))),d=a('<input type="button" value="'+k("cart_step3_gonext",k("cart_gonext"))+'" />').click(function(){var d=f.canSetOrder(),e=a(this),g=e.attr("value");if(f.form().acceptAgreement&&!b.imForm.validate(s))return!1;d.success!==!0?c.alert(d.message):(e.attr("value",k("cart_order_process")),f.setOrder(function(a){a.success?c.top.location.hash="#step4":(e.attr("value",g),c.alert(a.message))}))}),i=a('<input type="button" value="'+k("cart_step3_goback",k("cart_goback"))+'" />').click(function(){c.top.location.hash="#step2"}),e.append(a("<div />").addClass("buttons-container").append(i).append(d)),o()},t=function(){var d=f.payment(),g=f.paymentHTML();if(!f.canSetOrder().success){c.top.location.hash="#step1";return}a(".imTip").remove(),b.utils.scrollTo(0),e.empty(),b.cart.ui.steps.active&&e.append(m(3)),e.append('<h2 id="imPgTitle" class="imTitleMargin">'+k("cart_step4")+"</h2>").append("<p>"+k("cart_step4_descr")+"</p>").append('<div class="order-number">'+f.orderNumber()+"</div>"),d&&e.append("<p><b>"+d.name()+"</b><br />"+d.email()+"</p>"+(g!==""?'<div id="payment-html">'+g+"</div>":"")),b.utils.isOnline()||b.utils.showOfflineMessage(k("cart_err_offline_email").replace(/\[MAIL\]/g,f.userInvoiceData().Email.value)),a(c).one("hashchange beforeunload",function(){f.empty(!0)}),o()};(function u(b){b||(b=!1);if(b){d.fadeOut(250,u);return}var e=c.top.location.hash.replace("#","").split("/");switch(e[0]){case"category":p(e.length>1?e[1]:null);break;case"step2":r(e.length>1?e[1]:null);break;case"step3":s();break;case"step4":t();break;default:q()}a(c).one("hashchange",u)})(d.is(":visible"))},addToCart:function(d,e,f,g,h,i){var j=b.cart.manager;if(j===null)return;e=e||1,i=i?i:"",h=typeof h=="undefined"?!0:h;try{j.add(d,parseInt(e,10),f,g)&&(h?(a.imCookie("x5CartContinue",c.top.location.href,{path:"/"}),b.utils.location(i+"cart/"+j.settings().indexpage+"#step1")):c.alert(b.l10n.get("cart_product_added")))}catch(k){c.alert(k.message)}return!1},resumeShopping:function(){var d=a.imCookie("x5CartContinue",null,{path:"/"});d?c.top.location.href=d:c.top.location.href="/"+b.cart.manager.settings().continue_shopping_page},updateProductListOptions:function(c,d,e){var f=b.cart.manager,g=f.store(c),h,i,j=a(d),k=a("#"+e+"_fullprice"),l;g.option(j.val()),k.length&&(l=k.parent().attr("data-includevat")=="true",k.html(f.formatCurrency(g.fullPrice(l))),a("#"+e+"_price").html(f.formatCurrency(g.price(l))));if(g){a("#"+e+"_subopt").remove(),h=g.base().options[g.option()];if("suboptions"in h){var m=a('<select id="'+e+'_subopt" style="float: right; width: 47%;"/>');for(i=0;i<h.suboptions.length;i++)m.append('<option value="'+i+'">'+h.suboptions[i]+"</option>");m.val(0),j.width("47%").after(m)}else j.width("99%").css("float","none")}},updateWidget:function(){var c=b.cart.manager,d=b.cart.ui.updateWidget;if(c===null)return setTimeout(d,500);a(".widget_quantity_total").text(c.count(!0)),a(".widget_amount_total").text(c.formatCurrency(c.price(c.settings().vattype=="included"))),c.bind("x5cart.priceChanged",d).bind("x5cart.quantityChanged",d)}}),b.cart.loaded=!0}(_jq,x5engine,window);